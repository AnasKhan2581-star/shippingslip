<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Shipping Slip Generator - Zardoz by Anas Traders</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 20px;
    text-align: center;
  }

  h2 {
    margin-bottom: 10px;
  }

  .form-container {
    display: flex;
    justify-content: center;
    gap: 40px;
    margin-bottom: 20px;
    flex-wrap: wrap;
  }

  .form-box {
    border: 2px solid #007bff;
    border-radius: 10px;
    padding: 15px;
    width: 300px;
    text-align: left;
  }

  label {
    font-weight: bold;
  }

  input, textarea {
    width: 100%;
    margin-bottom: 10px;
    padding: 5px;
    font-size: 14px;
  }

  .btn-container {
    margin-top: 10px;
  }

  button {
    background-color: #ff7b00;
    color: white;
    border: none;
    padding: 10px 20px;
    font-size: 16px;
    border-radius: 6px;
    cursor: pointer;
    margin: 0 5px;
  }

  button:hover {
    background-color: #e36e00;
  }

  /* Print layout */
  @media print {
    body * {
      visibility: hidden;
    }
    #printArea, #printArea * {
      visibility: visible;
    }
    #printArea {
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      margin: 0;
    }
  }

  .page {
    width: 210mm;
    height: 297mm;
    margin: 0 auto;
    border: 2px solid #007bff;
    box-sizing: border-box;
    padding: 15mm;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .slip {
    border: 2px solid orange;
    border-radius: 5px;
    padding: 10mm;
    box-sizing: border-box;
    height: 45%;
    text-align: left;
    position: relative;
  }

  .datetime {
    position: absolute;
    top: 5px;
    right: 10px;
    font-size: 10px;
    color: #555;
  }

  .field {
    margin-bottom: 5px;
  }

  .label {
    font-weight: bold;
  }
</style>
</head>
<body>

<h2>Shipping Slip Generator - Zardoz by Anas Traders</h2>

<div class="form-container">
  <div class="form-box">
    <h3>Slip 1</h3>
    <label>Name</label>
    <input type="text" id="name1" placeholder="Enter name">
    <label>Address</label>
    <textarea id="address1" rows="3" placeholder="Enter address"></textarea>
    <label>Mobile Number</label>
    <input type="text" id="mobile1" placeholder="Enter mobile number(s)">
  </div>

  <div class="form-box">
    <h3>Slip 2</h3>
    <label>Name</label>
    <input type="text" id="name2" placeholder="Enter name">
    <label>Address</label>
    <textarea id="address2" rows="3" placeholder="Enter address"></textarea>
    <label>Mobile Number</label>
    <input type="text" id="mobile2" placeholder="Enter mobile number(s)">
  </div>
</div>

<div class="btn-container">
  <button onclick="printSlips()">üñ®Ô∏è Print</button>
  <button onclick="sharePDF()">üì§ Share</button>
</div>

<!-- Printable Area -->
<div id="printArea" style="display:none;">
  <div class="page">
    <div class="slip" id="slip1">
      <div class="datetime" id="datetime1"></div>
      <div class="field"><span class="label">Name: </span><span id="pname1"></span></div>
      <div class="field"><span class="label">Address: </span><span id="paddress1"></span></div>
      <div class="field"><span class="label">Mobile: </span><span id="pmobile1"></span></div>
    </div>

    <div class="slip" id="slip2">
      <div class="datetime" id="datetime2"></div>
      <div class="field"><span class="label">Name: </span><span id="pname2"></span></div>
      <div class="field"><span class="label">Address: </span><span id="paddress2"></span></div>
      <div class="field"><span class="label">Mobile: </span><span id="pmobile2"></span></div>
    </div>
  </div>
</div>

<script>
  function getISTTime() {
    const date = new Date();
    const utc = date.getTime() + date.getTimezoneOffset() * 60000;
    const ist = new Date(utc + 5.5 * 3600000);
    return ist.toLocaleString('en-IN', { hour12: true });
  }

  function fillSlips() {
    document.getElementById('pname1').innerText = document.getElementById('name1').value;
    document.getElementById('paddress1').innerText = document.getElementById('address1').value;
    document.getElementById('pmobile1').innerText = document.getElementById('mobile1').value;
    document.getElementById('datetime1').innerText = getISTTime();

    document.getElementById('pname2').innerText = document.getElementById('name2').value;
    document.getElementById('paddress2').innerText = document.getElementById('address2').value;
    document.getElementById('pmobile2').innerText = document.getElementById('mobile2').value;
    document.getElementById('datetime2').innerText = getISTTime();

    // Hide slip 2 if empty
    const slip2 = document.getElementById('slip2');
    if (
      !document.getElementById('name2').value &&
      !document.getElementById('address2').value &&
      !document.getElementById('mobile2').value
    ) {
      slip2.style.visibility = 'hidden';
    } else {
      slip2.style.visibility = 'visible';
    }
  }

  function printSlips() {
    fillSlips();
    document.getElementById('printArea').style.display = 'block';
    window.print();
    document.getElementById('printArea').style.display = 'none';
  }

  async function sharePDF() {
    fillSlips();

    const blob = new Blob(
      [document.getElementById('printArea').outerHTML],
      { type: "application/pdf" }
    );

    const file = new File([blob], "ShippingSlips.pdf", { type: "application/pdf" });

    if (navigator.canShare && navigator.canShare({ files: [file] })) {
      await navigator.share({
        title: "Shipping Slips - Zardoz by Anas Traders",
        files: [file]
      });
    } else {
      alert("Sharing not supported on this device/browser.");
    }
  }
</script>

</body>
</html>
